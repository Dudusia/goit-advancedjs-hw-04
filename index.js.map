{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchImagesByQuery = async (searchedQuery, perPage, page = 1) => {\n  const apiKey = '50853777-8fecba6f69a77bb52efd7171d';\n  // set this way to prevent the following error:\n  // Mixed Content: The page at 'https://dudusia.github.io/goit-advancedjs-hw-04/' was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint 'http://pixabay.com/api/?key=50853777-8fecba6f69a77bb52efd7171d&q=%D0%BA%D1%83%D0%BC%D0%B0&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=1'. This request has been blocked; the content must be served over HTTPS.\n  // example from the docs: https://pixabay.com/api/docs/\n\tconst response = await axios.get(\"/api/\", {\n    params: {\n      key: apiKey,\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    }\n  });\n  return response.data\n};\n","export const createGalleryCardTemplate = ({\n  tags: alt,\n  largeImageURL: src,\n  webformatURL: miniSrc,\n  likes: likes,\n  views: views,\n  comments: comments,\n  downloads: downloads,\n}) => {\n  return `\n    <li class=\"gallery-item\">\n        <a href=\"${src}\" class=\"gallery-link\">\n            <img src=\"${miniSrc}\" alt=\"${alt}\" width=\"360\" height=\"200\" class=\"gallery-image\">\n        </a>\n        <div class=\"gallery-item-stats\">\n            <p class=\"gallery-item-description\"><span class=\"gallery-item-property\">Views</span><br>${views}</p>\n            <p class=\"gallery-item-description\"><span class=\"gallery-item-property\">Likes</span><br>${likes}</p>\n            <p class=\"gallery-item-description\"><span class=\"gallery-item-property\">Comments</span><br>${comments}</p>\n            <p class=\"gallery-item-description\"><span class=\"gallery-item-property\">Downloads</span><br>${downloads}</p>\n        </div>\n    </li>\n  `;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImagesByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.js-loader'),\n  searchForm: document.querySelector('.form'),\n  searchBtn: document.querySelector('.search-button'),\n  loadBtn: document.querySelector('.load-button'),\n  searchInput: document.querySelector('.search-input'),\n};\n\nconst perPage = 15;\n\n/* Lightbox */\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n});\n\nrefs.searchBtn.addEventListener('click', () => {\n  refs.loadBtn.classList.remove('active');\n  currLoadPage = 2;\n  if (!refs.searchInput.value.trim()) {\n    return;\n  } else {\n    refs.gallery.innerHTML = '';\n    refs.loader.classList.add('active');\n    fetchImagesByQuery(refs.searchInput.value, perPage)\n      .then(data => {\n        if (data.total === 0) {\n          iziToast.warning({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n          });\n          return;\n        }\n        const galleryCardsTemplate = data.hits\n          .map(pictureInfo => createGalleryCardTemplate(pictureInfo))\n          .join('');\n\n        refs.gallery.innerHTML = galleryCardsTemplate;\n        lightbox.refresh();\n        if (data.total >= perPage) {\n          refs.loadBtn.classList.add('active');\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        refs.loader.classList.remove('active');\n      });\n  }\n});\n\nvar currLoadPage = 2;\n\nrefs.loadBtn.addEventListener('click', () => {\n  refs.loadBtn.classList.remove('active');\n  refs.loader.classList.add('active');\n  fetchImagesByQuery(refs.searchInput.value, perPage, currLoadPage)\n    .then(data => {\n      if (data.hits.length === 0) {\n          iziToast.warning({\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n          });\n          currLoadPage = 2;\n          return;\n      } else {\n        const galleryCardsTemplate = data.hits\n          .map(pictureInfo => createGalleryCardTemplate(pictureInfo))\n          .join('');\n\n        refs.gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n        lightbox.refresh();\n        currLoadPage += 1;\n        refs.loadBtn.classList.add('active');\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {\n      refs.loader.classList.remove('active');\n    });\n})\n"],"names":["axios","fetchImagesByQuery","searchedQuery","perPage","page","createGalleryCardTemplate","alt","src","miniSrc","likes","views","comments","downloads","refs","lightbox","SimpleLightbox","evt","currLoadPage","data","iziToast","galleryCardsTemplate","pictureInfo","err"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAqB,MAAOC,EAAeC,EAASC,EAAO,KAKtD,MAAMJ,EAAM,IAAI,QAAS,CACvC,OAAQ,CACN,IANW,qCAOX,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUC,EACV,KAAMC,CACZ,CACA,CAAG,GACe,KCpBLC,EAA4B,CAAC,CACxC,KAAMC,EACN,cAAeC,EACf,aAAcC,EACd,MAAOC,EACP,MAAOC,EACP,SAAUC,EACV,UAAWC,CACb,IACS;AAAA;AAAA,mBAEUL,CAAG;AAAA,wBACEC,CAAO,UAAUF,CAAG;AAAA;AAAA;AAAA,sGAG0DI,CAAK;AAAA,sGACLD,CAAK;AAAA,yGACFE,CAAQ;AAAA,0GACPC,CAAS;AAAA;AAAA;AAAA,ICX7GC,EAAO,CACX,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,YAAY,EAC3C,WAAY,SAAS,cAAc,OAAO,EAC1C,UAAW,SAAS,cAAc,gBAAgB,EAClD,QAAS,SAAS,cAAc,cAAc,EAC9C,YAAa,SAAS,cAAc,eAAe,CACrD,EAEMV,EAAU,GAGhB,IAAIW,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,WAAW,iBAAiB,SAAUG,GAAO,CAChDA,EAAI,eAAgB,CACtB,CAAC,EAEDH,EAAK,UAAU,iBAAiB,QAAS,IAAM,CAG7C,GAFAA,EAAK,QAAQ,UAAU,OAAO,QAAQ,EACtCI,EAAe,EACVJ,EAAK,YAAY,MAAM,KAAI,EAG9BA,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCZ,EAAmBY,EAAK,YAAY,MAAOV,CAAO,EAC/C,KAAKe,GAAQ,CACZ,GAAIA,EAAK,QAAU,EAAG,CACpBC,EAAS,QAAQ,CACf,QACE,2EACF,SAAU,UACtB,CAAW,EACD,MACV,CACQ,MAAMC,EAAuBF,EAAK,KAC/B,IAAIG,GAAehB,EAA0BgB,CAAW,CAAC,EACzD,KAAK,EAAE,EAEVR,EAAK,QAAQ,UAAYO,EACzBN,EAAS,QAAS,EACdI,EAAK,OAASf,GAChBU,EAAK,QAAQ,UAAU,IAAI,QAAQ,CAEtC,CAAA,EACA,MAAMS,GAAO,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAAA,EACA,QAAQ,IAAM,CACbT,EAAK,OAAO,UAAU,OAAO,QAAQ,CAC7C,CAAO,MA7BH,OA+BJ,CAAC,EAED,IAAII,EAAe,EAEnBJ,EAAK,QAAQ,iBAAiB,QAAS,IAAM,CAC3CA,EAAK,QAAQ,UAAU,OAAO,QAAQ,EACtCA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCZ,EAAmBY,EAAK,YAAY,MAAOV,EAASc,CAAY,EAC7D,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,QAAQ,CACf,QACE,6DACF,SAAU,UACtB,CAAW,EACDF,EAAe,EACf,MACV,KAAa,CACL,MAAMG,EAAuBF,EAAK,KAC/B,IAAIG,GAAehB,EAA0BgB,CAAW,CAAC,EACzD,KAAK,EAAE,EAEVR,EAAK,QAAQ,mBAAmB,YAAaO,CAAoB,EACjEN,EAAS,QAAS,EAClBG,GAAgB,EAChBJ,EAAK,QAAQ,UAAU,IAAI,QAAQ,CAC3C,CACK,CAAA,EACA,MAAMS,GAAO,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAAA,EACA,QAAQ,IAAM,CACbT,EAAK,OAAO,UAAU,OAAO,QAAQ,CAC3C,CAAK,CACL,CAAC"}